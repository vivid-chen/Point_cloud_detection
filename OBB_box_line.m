% 2019/12/5
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 这是一个在角点之间插入大量直线分布的点云来模拟边框的函数 
%
% Input: 
%           矩形盒边框的8个角点
%           输入格式：8*3 矩阵
% Output: 
%           两两角点间直线上分布的点云
%           输出格式：一个pointCloud类
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

function box = OBB_box_line(cornerpoints)
%输入OriBoundingBox的8个角点，得到矩形框架的点云

%% 获取8个角点的坐标
point1 = single(cornerpoints(1,:,:));
point2 = single(cornerpoints(2,:,:));
point3 = single(cornerpoints(3,:,:));
point4 = single(cornerpoints(4,:,:));
point5 = single(cornerpoints(5,:,:));
point6 = single(cornerpoints(6,:,:));
point7 = single(cornerpoints(7,:,:));
point8 = single(cornerpoints(8,:,:));

%% 角点之间两两插值100个点
line1 = [linspace(point1(1),point2(1),100)',...
         linspace(point1(2),point2(2),100)',...
         linspace(point1(3),point2(3),100)'];
line2 = [linspace(point1(1),point3(1),100)',...
         linspace(point1(2),point3(2),100)',...
         linspace(point1(3),point3(3),100)'];
line3 = [linspace(point1(1),point4(1),100)',...
         linspace(point1(2),point4(2),100)',...
         linspace(point1(3),point4(3),100)'];
line4 = [linspace(point1(1),point5(1),100)',...
         linspace(point1(2),point5(2),100)',...
         linspace(point1(3),point5(3),100)'];
line5 = [linspace(point1(1),point6(1),100)',...
         linspace(point1(2),point6(2),100)',...
         linspace(point1(3),point6(3),100)'];
line6 = [linspace(point1(1),point7(1),100)',...
         linspace(point1(2),point7(2),100)',...
         linspace(point1(3),point7(3),100)'];
line7 = [linspace(point1(1),point8(1),100)',...
         linspace(point1(2),point8(2),100)',...
         linspace(point1(3),point8(3),100)'];
line8 = [linspace(point2(1),point3(1),100)',...
         linspace(point2(2),point3(2),100)',...
         linspace(point2(3),point3(3),100)'];
line9 = [linspace(point2(1),point4(1),100)',...
         linspace(point2(2),point4(2),100)',...
         linspace(point2(3),point4(3),100)'];
line10= [linspace(point2(1),point5(1),100)',...
         linspace(point2(2),point5(2),100)',...
         linspace(point2(3),point5(3),100)'];
line11= [linspace(point2(1),point6(1),100)',...
         linspace(point2(2),point6(2),100)',...
         linspace(point2(3),point6(3),100)'];
line12= [linspace(point2(1),point7(1),100)',...
         linspace(point2(2),point7(2),100)',...
         linspace(point2(3),point7(3),100)'];
line13= [linspace(point2(1),point8(1),100)',...
         linspace(point2(2),point8(2),100)',...
         linspace(point2(3),point8(3),100)'];
line14= [linspace(point3(1),point4(1),100)',...
         linspace(point3(2),point4(2),100)',...
         linspace(point3(3),point4(3),100)'];
line15= [linspace(point3(1),point5(1),100)',...
         linspace(point3(2),point5(2),100)',...
         linspace(point3(3),point5(3),100)'];     
line16= [linspace(point3(1),point6(1),100)',...
         linspace(point3(2),point6(2),100)',...
         linspace(point3(3),point6(3),100)'];
line17= [linspace(point3(1),point7(1),100)',...
         linspace(point3(2),point7(2),100)',...
         linspace(point3(3),point7(3),100)'];
line18= [linspace(point3(1),point8(1),100)',...
         linspace(point3(2),point8(2),100)',...
         linspace(point3(3),point8(3),100)'];
line19= [linspace(point4(1),point5(1),100)',...
         linspace(point4(2),point5(2),100)',...
         linspace(point4(3),point5(3),100)'];
line20= [linspace(point4(1),point6(1),100)',...
         linspace(point4(2),point6(2),100)',...
         linspace(point4(3),point6(3),100)'];
line21= [linspace(point4(1),point7(1),100)',...
         linspace(point4(2),point7(2),100)',...
         linspace(point4(3),point7(3),100)'];
line22= [linspace(point4(1),point8(1),100)',...
         linspace(point4(2),point8(2),100)',...
         linspace(point4(3),point8(3),100)'];
line23= [linspace(point5(1),point6(1),100)',...
         linspace(point5(2),point6(2),100)',...
         linspace(point5(3),point6(3),100)'];
line24= [linspace(point5(1),point7(1),100)',...
         linspace(point5(2),point7(2),100)',...
         linspace(point5(3),point7(3),100)'];
line25= [linspace(point5(1),point8(1),100)',...
         linspace(point5(2),point8(2),100)',...
         linspace(point5(3),point8(3),100)'];
line26= [linspace(point6(1),point7(1),100)',...
         linspace(point6(2),point7(2),100)',...
         linspace(point6(3),point7(3),100)'];
line27= [linspace(point6(1),point8(1),100)',...
         linspace(point6(2),point8(2),100)',...
         linspace(point6(3),point8(3),100)'];
line28= [linspace(point7(1),point8(1),100)',...
         linspace(point7(2),point8(2),100)',...
         linspace(point7(3),point8(3),100)'];
%% 集合所有线成为一个点云矩形框
lineCloud = [line1; line2; line3; line4; line5;...
             line6; line7; line8; line9; line10;...
             line11;line12;line13;line14;line15;...
             line16;line17;line18;line19;line20;...
             line21;line22;line23;line24;line25;...
             line26;line27;line28];
box = pointCloud(lineCloud);
end

